{"ast":null,"code":"import _asyncToGenerator from\"/home/user/codeLocal/FOTOBASE2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/user/codeLocal/FOTOBASE2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/user/codeLocal/FOTOBASE2/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useState,useEffect}from\"react\";import axios from\"axios\";import SignUpContext from\"./context/SignUpContext\";import FotoContext from\"./context/FotoContext\";import{NavLink,useNavigate}from\"react-router-dom\";import Fotos from\"./Fotos\";//Foto Upload\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Upload=function Upload(){var _useContext=useContext(SignUpContext),handleUploadClick=_useContext.handleUploadClick,isShowUpload=_useContext.isShowUpload,isAuthenticated=_useContext.isAuthenticated;var _useContext2=useContext(FotoContext),refreshPage=_useContext2.refreshPage,SetRefreshPage=_useContext2.SetRefreshPage;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),keywords=_useState8[0],setKeywords=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),comment=_useState10[0],setComment=_useState10[1];var changeTitle=function changeTitle(e){setTitle(e.target.value);};var changeDate=function changeDate(e){setDate(e.target.value);};var navigate=useNavigate();useEffect(function(){if(refreshPage)navigate(\"/upload\");},[refreshPage]);var changeComment=function changeComment(e){setComment(e.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data=new FormData();data.append(\"avatar\",file);data.append(\"title\",title);data.append(\"date\",date);data.append(\"comment\",comment);data.append(\"keywords\",keywords);config={headers:{Accept:\"application/json\",\"Content-Type\":\"multipart/form-data\"},withCredentials:true};axios.post(\"http://localhost:3001/user/upload\",data,config).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);});handleUploadClick();SetRefreshPage(true);case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();// get fotos\nvar _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),fotos=_useState12[0],setFotos=_useState12[1];var _useState13=useState(1),_useState14=_slicedToArray(_useState13,2),page=_useState14[0],setPage=_useState14[1];var getFotos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var page,limit,result,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:page=_args2.length>0&&_args2[0]!==undefined?_args2[0]:1;limit=_args2.length>1&&_args2[1]!==undefined?_args2[1]:12;_context2.next=4;return axios.get(\"http://localhost:3001/user/fotos?page=\".concat(page,\"&limit=\").concat(limit));case 4:result=_context2.sent;console.log(result);if(result){setFotos(result.data.fotoList);}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getFotos(){return _ref2.apply(this,arguments);};}();var sortFotosA=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var page,limit,result,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:page=_args3.length>0&&_args3[0]!==undefined?_args3[0]:1;limit=_args3.length>1&&_args3[1]!==undefined?_args3[1]:12;_context3.next=4;return axios.get(\"http://localhost:3001/user/fotos/sortA?page=\".concat(page,\"&limit=\").concat(limit));case 4:result=_context3.sent;if(result){setFotos(result.data.fotoList);}case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function sortFotosA(){return _ref3.apply(this,arguments);};}();var sortFotosD=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var page,limit,result,_args4=arguments;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:page=_args4.length>0&&_args4[0]!==undefined?_args4[0]:1;limit=_args4.length>1&&_args4[1]!==undefined?_args4[1]:12;_context4.next=4;return axios.get(\"http://localhost:3001/user/fotos/sortD?page=\".concat(page,\"&limit=\").concat(limit));case 4:result=_context4.sent;if(result){setFotos(result.data.fotoList);}case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function sortFotosD(){return _ref4.apply(this,arguments);};}();var sortFotosDate=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var page,limit,result,_args5=arguments;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:page=_args5.length>0&&_args5[0]!==undefined?_args5[0]:1;limit=_args5.length>1&&_args5[1]!==undefined?_args5[1]:12;_context5.next=4;return axios.get(\"http://localhost:3001/user/fotos/sortDate?page=\".concat(page,\"&limit=\").concat(limit));case 4:result=_context5.sent;if(result){setFotos(result.data.fotoList);}case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function sortFotosDate(){return _ref5.apply(this,arguments);};}();useEffect(function(){getFotos();},[]);useEffect(function(){getFotos(page);},[page]);var next=function next(){var nextPage=page+1;setPage(nextPage);};var previous=function previous(){var previousPage=page-1;if(previousPage<1){setPage(1);}else{setPage(previousPage);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-expand-lg navbar-light bg-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarTogglerDemo02\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav me-auto mb-2 mb-lg-0\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link active\",\"aria-current\":\"page\",href:\"#\",children:\"Foto Collection\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:function onClick(){return handleUploadClick();},children:\"Upload Foto\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary dropdown-toggle ml-8\",type:\"button\",id:\"dropdownMenuButton1\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",children:\"Filter\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton1\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",href:\"#\",children:\"Action\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",href:\"#\",children:\"Another action\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",href:\"#\",children:\"Something else here\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary dropdown-toggle\",type:\"button\",id:\"dropdownMenuButton1\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",children:\"Sort\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton1\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",onClick:sortFotosA,children:\"Ascending Title\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",href:\"#\",onClick:sortFotosD,children:\"Descending Title\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item\",href:\"#\",onClick:sortFotosDate,children:\"By Date\"})})]})]})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(isShowUpload?\"wrapper1 active\":\"wrapper1 show\"),children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"upload-head\",children:\"Upload a foto\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-container1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border-container1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"icons fa-4x\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-image\",\"data-fa-transform\":\"shrink-3 down-2 left-6 rotate--45\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-alt\",\"data-fa-transform\":\"shrink-2 up-4\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-pdf\",\"data-fa-transform\":\"shrink-3 down-2 right-6 rotate-45\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",onChange:changeTitle})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",onChange:changeDate})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",children:\"Comment\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"comment\",onChange:changeComment})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",name:\"avatar\",onChange:function onChange(e){var file=e.target.files[0];setFile(file);console.log(file);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"warning\",value:\"Upload\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Drag and drop foto here your computer.\"})]})})]})})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Your Foto Collection\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex md5 flex-wrap justify-content-start\",children:fotos.length>0&&fotos.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:isAuthenticated?/*#__PURE__*/_jsx(Fotos,{fotos:item}):\"Please login!\"},index)});})}),/*#__PURE__*/_jsx(\"div\",{className:\"row container sticky-bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsxs(\"b\",{children:[\" page : \",page,\" \"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:previous,className:\"btn btn-primary\",children:\"Previous\"}),\" \",\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"button\",{onClick:next,className:\"btn btn-primary\",disabled:fotos.length<1,children:\"Next\"}),/*#__PURE__*/_jsxs(\"p\",{children:[fotos.length,\" fotos found\"]})]})})]})]});};export default Upload;","map":{"version":3,"sources":["/home/user/codeLocal/FOTOBASE2/client/src/components/Upload.js"],"names":["React","useContext","useState","useEffect","axios","SignUpContext","FotoContext","NavLink","useNavigate","Fotos","Upload","handleUploadClick","isShowUpload","isAuthenticated","refreshPage","SetRefreshPage","file","setFile","title","setTitle","date","setDate","keywords","setKeywords","comment","setComment","changeTitle","e","target","value","changeDate","navigate","changeComment","handleSubmit","preventDefault","data","FormData","append","config","headers","Accept","withCredentials","post","then","res","console","log","catch","err","fotos","setFotos","page","setPage","getFotos","limit","get","result","fotoList","sortFotosA","sortFotosD","sortFotosDate","next","nextPage","previous","previousPage","files","length","map","item","index"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport SignUpContext from \"./context/SignUpContext\";\nimport FotoContext from \"./context/FotoContext\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport Fotos from \"./Fotos\";\n\n//Foto Upload\n\nconst Upload = () => {\n  const { handleUploadClick, isShowUpload, isAuthenticated } =\n    useContext(SignUpContext);\n    const { refreshPage, SetRefreshPage } =\n    useContext(FotoContext);\n\n  const [file, setFile] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [keywords, setKeywords] = useState([]);\n  const [comment, setComment] = useState(\"\");\n  const changeTitle = (e) => {\n    setTitle(e.target.value);\n  };\n  const changeDate = (e) => {\n    setDate(e.target.value);\n  };\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (refreshPage) navigate(\"/upload\");\n  }, [refreshPage]);\n  const changeComment = (e) => {\n    setComment(e.target.value);\n  };\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const data = new FormData();\n    data.append(\"avatar\", file);\n    data.append(\"title\", title);\n    data.append(\"date\", date);\n    data.append(\"comment\", comment);\n    data.append(\"keywords\", keywords);\n\n    const config = {\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"multipart/form-data\",\n      },\n      withCredentials: true,\n    };\n\n    axios\n      .post(\"http://localhost:3001/user/upload\", data, config)\n      .then((res) => console.log(res.data))\n      .catch((err) => console.log(err));\n\n    handleUploadClick();\n    SetRefreshPage(true);\n  };\n\n  // get fotos\n\n  const [fotos, setFotos] = useState([]);\n  const [page, setPage] = useState(1);\n\n  const getFotos = async (page = 1, limit = 12) => {\n    const result = await axios.get(\n      `http://localhost:3001/user/fotos?page=${page}&limit=${limit}`\n    );\n    console.log(result);\n\n    if (result) {\n      setFotos(result.data.fotoList);\n    }\n  };\n\n  const sortFotosA = async (page = 1, limit = 12) => {\n    const result = await axios.get(\n      `http://localhost:3001/user/fotos/sortA?page=${page}&limit=${limit}`\n    );\n    if (result) {\n      setFotos(result.data.fotoList);\n    }\n  };\n\n  const sortFotosD = async (page = 1, limit = 12) => {\n    const result = await axios.get(\n      `http://localhost:3001/user/fotos/sortD?page=${page}&limit=${limit}`\n    );\n    if (result) {\n      setFotos(result.data.fotoList);\n    }\n  };\n\n  const sortFotosDate = async (page = 1, limit = 12) => {\n    const result = await axios.get(\n      `http://localhost:3001/user/fotos/sortDate?page=${page}&limit=${limit}`\n    );\n    if (result) {\n      setFotos(result.data.fotoList);\n    }\n  };\n\n  useEffect(() => {\n    getFotos();\n  }, []);\n\n  useEffect(() => {\n    getFotos(page);\n  }, [page]);\n\n  const next = () => {\n    const nextPage = page + 1;\n    setPage(nextPage);\n  };\n\n  const previous = () => {\n    const previousPage = page - 1;\n    if (previousPage < 1) {\n      setPage(1);\n    } else {\n      setPage(previousPage);\n    }\n  };\n\n\n\n  return (\n    <div>\n      <div>\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n          <div className=\"container-fluid\">\n            <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\n              <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                <li className=\"nav-item\">\n                  <a className=\"nav-link active\" aria-current=\"page\" href=\"#\">\n                    Foto Collection\n                  </a>\n                </li>\n                <li className=\"nav-item\">\n                  <button\n                    className=\"btn btn-secondary\"\n                    onClick={() => handleUploadClick()}\n                  >\n                    Upload Foto\n                  </button>\n                </li>\n                <div className=\"dropdown\">\n                  <button\n                    className=\"btn btn-secondary dropdown-toggle ml-8\"\n                    type=\"button\"\n                    id=\"dropdownMenuButton1\"\n                    data-bs-toggle=\"dropdown\"\n                    aria-expanded=\"false\"\n                  >\n                    Filter\n                  </button>\n                  <ul\n                    className=\"dropdown-menu\"\n                    aria-labelledby=\"dropdownMenuButton1\"\n                  >\n                    <li>\n                      <a className=\"dropdown-item\" href=\"#\">\n                        Action\n                      </a>\n                    </li>\n                    <li>\n                      <a className=\"dropdown-item\" href=\"#\">\n                        Another action\n                      </a>\n                    </li>\n                    <li>\n                      <a className=\"dropdown-item\" href=\"#\">\n                        Something else here\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n\n                <div className=\"dropdown\">\n                  <button\n                    className=\"btn btn-secondary dropdown-toggle\"\n                    type=\"button\"\n                    id=\"dropdownMenuButton1\"\n                    data-bs-toggle=\"dropdown\"\n                    aria-expanded=\"false\"\n                  >\n                    Sort\n                  </button>\n                  <ul\n                    className=\"dropdown-menu\"\n                    aria-labelledby=\"dropdownMenuButton1\"\n                  >\n                    <li>\n                      <button className=\"dropdown-item\" onClick={sortFotosA}>\n                        Ascending Title\n                      </button>\n                    </li>\n                    <li>\n                      <button\n                        className=\"dropdown-item\"\n                        href=\"#\"\n                        onClick={sortFotosD}\n                      >\n                        Descending Title\n                      </button>\n                    </li>\n                    <li>\n                      <button\n                        className=\"dropdown-item\"\n                        href=\"#\"\n                        onClick={sortFotosDate}\n                      >\n                        By Date\n                      </button>\n                    </li>\n                  </ul>\n                </div>\n              </ul>\n            </div>\n          </div>\n        </nav>\n\n        <div\n          className={`${isShowUpload ? \"wrapper1 active\" : \"wrapper1 show\"}`}\n        >\n          <form onSubmit={handleSubmit}>\n            <div className=\"wrapper1\">\n              <div className=\"container1\">\n                <h1 className=\"upload-head\">Upload a foto</h1>\n                <div className=\"upload-container1\">\n                  <div className=\"border-container1\">\n                    <div className=\"icons fa-4x\">\n                      <i\n                        className=\"fas fa-file-image\"\n                        data-fa-transform=\"shrink-3 down-2 left-6 rotate--45\"\n                      ></i>\n                      <i\n                        className=\"fas fa-file-alt\"\n                        data-fa-transform=\"shrink-2 up-4\"\n                      ></i>\n                      <i\n                        className=\"fas fa-file-pdf\"\n                        data-fa-transform=\"shrink-3 down-2 right-6 rotate-45\"\n                      ></i>\n                    </div>\n                    <div>\n                      <label htmlFor=\"title\">Title</label>\n                      <input type=\"text\" name=\"title\" onChange={changeTitle} />\n                    </div>\n                    <div>\n                      <label htmlFor=\"date\">Date</label>\n                      <input type=\"date\" name=\"date\" onChange={changeDate} />\n                    </div>\n                   \n                    <div>\n                      <label htmlFor=\"comment\">Comment</label>\n                      <input\n                        type=\"text\"\n                        name=\"comment\"\n                        onChange={changeComment}\n                      />\n                    </div>\n                    <input\n                      type=\"file\"\n                      id=\"file\"\n                      name=\"avatar\"\n                      onChange={(e) => {\n                        const file = e.target.files[0];\n                        setFile(file);\n                        console.log(file);\n                      }}\n                    />\n                    <input type=\"submit\" className=\"warning\" value=\"Upload\" />\n                    <p>Drag and drop foto here your computer.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n      <div>\n        <div>\n          <h1>Your Foto Collection</h1>\n        </div>\n\n        <div className=\"d-flex md5 flex-wrap justify-content-start\">\n          {fotos.length > 0 &&\n            fotos.map((item, index) => {\n              return (\n                <div>\n                  <div key={index}>\n                    {isAuthenticated ? <Fotos fotos={item} /> : \"Please login!\"}\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n\n        <div className=\"row container sticky-bottom\">\n          <div className=\"col\">\n            <p>\n              {\" \"}\n              <b> page : {page} </b>\n            </p>\n            <button onClick={previous} className=\"btn btn-primary\">\n              Previous\n            </button>{\" \"}\n            &nbsp;&nbsp;\n            <button\n              onClick={next}\n              className=\"btn btn-primary\"\n              disabled={fotos.length < 1}\n            >\n              Next\n            </button>\n            <p>{fotos.length} fotos found</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}