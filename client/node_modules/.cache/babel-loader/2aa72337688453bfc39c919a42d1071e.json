{"ast":null,"code":"var _jsxFileName = \"/home/user/codeLocal/FOTOBASE2/client/src/components/context/SignUpState.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport SignUpContext from \"./SignUpContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignUpState = props => {\n  _s();\n\n  const [isShowLogin, setIsShowLogin] = useState(false);\n  const [isShowUpload, setIsShowUpload] = useState(false); // const [isAuthenticated, setIsAuthenticated] = useState(false);\n  // const [result, setResult] = useState(null);\n\n  const [isRegistered, SetIsRegistered] = useState(false); // function App() {\n  //   const loginSession = JSON.parse(sessionStorage.getItem(\"login\")) || {\n  //   username: \"\",\n  //   loggedIn: false,\n  //   };\n  //   const [username, setUsername] = useState(loginSession[\"username\"]);\n  //   const [loggedIn, setLoggedIn] = useState(loginSession[\"loggedIn\"]);\n  //   const handleLogin = (_username) => {\n  //   if (_username) {\n  //   setUsername(_username);\n  //   setLoggedIn(true);\n  //   } else {\n  //   setUsername(\"\");\n  //   setLoggedIn(false);\n  //   }\n  //   };\n\n  const [newUser, setNewUser] = useState({\n    firstName: \"-\",\n    lastName: \"\",\n    email: \"\",\n    street: \"\",\n    city: \"\",\n    postcode: \"\",\n    country: \"\",\n    birthday: \"\",\n    password: \"\"\n  });\n  const loginSession = JSON.parse(local.getItem(\"login\")) || {\n    isAuthenticated: false\n  };\n  const resultSession = JSON.parse(local.getItem(\"result\")) || {\n    result: null\n  };\n  const [isAuthenticated, setIsAuthenticated] = useState(loginSession[\"isAuthenticated\"]);\n  const [result, setResult] = useState(resultSession[\"result\"]); // const logoutHandler = async () => {\n  //   setIsAuthenticated(false);\n  //   const response = await axios.get(\"http://localhost:3001/user/logout\", {\n  //     withCredentials: true,\n  //   });\n  //   setResult(response.data);\n  // };\n  // const login = localStorage.getItem(\"login\");\n  // console.log(\"test:\", login);\n\n  console.log(result);\n\n  const handleLoginClick = async () => {\n    if (isAuthenticated) {\n      setIsAuthenticated(false); // localStorage.setItem(\"login\", \"false\");\n\n      const response = await axios.get(\"http://localhost:3001/user/logout\", {\n        withCredentials: true\n      });\n      setResult(response.data); // local.removeItem(result);\n    } else {\n      setIsShowLogin(isShowLogin => !isShowLogin);\n    } // if (!isAuthenticated) {\n    //   setResult(null);\n    // }\n\n  };\n\n  const handleLogout = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:3001/user/logout\", {\n        withCredentials: true\n      });\n      setIsAuthenticated(false);\n      local.removeItem(result);\n      console.log(result);\n    } catch (err) {\n      console.log(err);\n    } // if (!isAuthenticated) {\n    //   setResult(null);\n    // }\n\n  };\n\n  const handleUploadClick = () => {\n    if (isAuthenticated) {\n      setIsShowUpload(isShowUpload => !isShowUpload);\n    } else {\n      return;\n    }\n  };\n\n  useEffect(() => {\n    local.setItem(\"login\", JSON.stringify({\n      isAuthenticated: isAuthenticated\n    }));\n    local.setItem(\"result\", JSON.stringify({\n      result: result\n    }));\n  }, [isAuthenticated]);\n  return /*#__PURE__*/_jsxDEV(SignUpContext.Provider, {\n    value: {\n      isShowLogin,\n      setIsShowLogin,\n      handleLoginClick,\n      handleUploadClick,\n      isShowUpload,\n      isAuthenticated,\n      setIsAuthenticated,\n      result,\n      setResult,\n      // logoutHandler,\n      newUser,\n      setNewUser,\n      isRegistered,\n      SetIsRegistered,\n      handleLogout // loggedIn,\n      // setLoggedIn,\n      // login\n\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignUpState, \"zLWY3MtTnsfDD39Z/9lka+3jMDs=\");\n\n_c = SignUpState;\nexport default SignUpState;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpState\");","map":{"version":3,"sources":["/home/user/codeLocal/FOTOBASE2/client/src/components/context/SignUpState.js"],"names":["React","useState","useEffect","SignUpContext","axios","SignUpState","props","isShowLogin","setIsShowLogin","isShowUpload","setIsShowUpload","isRegistered","SetIsRegistered","newUser","setNewUser","firstName","lastName","email","street","city","postcode","country","birthday","password","loginSession","JSON","parse","local","getItem","isAuthenticated","resultSession","result","setIsAuthenticated","setResult","console","log","handleLoginClick","response","get","withCredentials","data","handleLogout","removeItem","err","handleUploadClick","setItem","stringify","children"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport SignUpContext from \"./SignUpContext\";\nimport axios from \"axios\";\n\nconst SignUpState = (props) => {\n  const [isShowLogin, setIsShowLogin] = useState(false);\n  const [isShowUpload, setIsShowUpload] = useState(false);\n  // const [isAuthenticated, setIsAuthenticated] = useState(false);\n  // const [result, setResult] = useState(null);\n  const [isRegistered, SetIsRegistered] = useState(false);\n\n  // function App() {\n  //   const loginSession = JSON.parse(sessionStorage.getItem(\"login\")) || {\n  //   username: \"\",\n  //   loggedIn: false,\n  //   };\n\n  //   const [username, setUsername] = useState(loginSession[\"username\"]);\n  //   const [loggedIn, setLoggedIn] = useState(loginSession[\"loggedIn\"]);\n\n  //   const handleLogin = (_username) => {\n  //   if (_username) {\n  //   setUsername(_username);\n  //   setLoggedIn(true);\n  //   } else {\n  //   setUsername(\"\");\n  //   setLoggedIn(false);\n  //   }\n  //   };\n\n  const [newUser, setNewUser] = useState({\n    firstName: \"-\",\n    lastName: \"\",\n    email: \"\",\n    street: \"\",\n    city: \"\",\n    postcode: \"\",\n    country: \"\",\n    birthday: \"\",\n    password: \"\",\n  });\n  const loginSession = JSON.parse(local.getItem(\"login\")) || {\n    isAuthenticated: false,\n  };\n\n  const resultSession = JSON.parse(local.getItem(\"result\")) || {\n    result: null,\n  };\n\n  const [isAuthenticated, setIsAuthenticated] = useState(\n    loginSession[\"isAuthenticated\"]\n  );\n  const [result, setResult] = useState(resultSession[\"result\"]);\n  // const logoutHandler = async () => {\n  //   setIsAuthenticated(false);\n  //   const response = await axios.get(\"http://localhost:3001/user/logout\", {\n  //     withCredentials: true,\n  //   });\n  //   setResult(response.data);\n  // };\n  // const login = localStorage.getItem(\"login\");\n  // console.log(\"test:\", login);\n  console.log(result);\n  const handleLoginClick = async () => {\n    if (isAuthenticated) {\n      setIsAuthenticated(false);\n\n      // localStorage.setItem(\"login\", \"false\");\n      const response = await axios.get(\"http://localhost:3001/user/logout\", {\n        withCredentials: true,\n      });\n      setResult(response.data);\n      // local.removeItem(result);\n    } else {\n      setIsShowLogin((isShowLogin) => !isShowLogin);\n    }\n\n    // if (!isAuthenticated) {\n    //   setResult(null);\n    // }\n  };\n\n  const handleLogout = async () => {\n\n    try {\n      const response = await axios.get(\"http://localhost:3001/user/logout\", {\n        withCredentials: true,\n      });\n      setIsAuthenticated(false);\n      local.removeItem(result)\n      console.log(result)\n\n    }catch(err) {\n      console.log(err);\n    }\n   \n\n    // if (!isAuthenticated) {\n    //   setResult(null);\n    // }\n  };\n\n  const handleUploadClick = () => {\n    if (isAuthenticated) {\n      setIsShowUpload((isShowUpload) => !isShowUpload);\n    } else {\n      return;\n    }\n  };\n\n  useEffect(() => {\n    local.setItem(\n      \"login\",\n      JSON.stringify({ isAuthenticated: isAuthenticated })\n    );\n    local.setItem(\"result\", JSON.stringify({ result: result }));\n  }, [isAuthenticated]);\n  return (\n    <SignUpContext.Provider\n      value={{\n        isShowLogin,\n        setIsShowLogin,\n        handleLoginClick,\n        handleUploadClick,\n        isShowUpload,\n        isAuthenticated,\n        setIsAuthenticated,\n        result,\n        setResult,\n        // logoutHandler,\n        newUser,\n        setNewUser,\n        isRegistered,\n        SetIsRegistered,\n        handleLogout\n        // loggedIn,\n        // setLoggedIn,\n        // login\n      }}\n    >\n      {props.children}\n    </SignUpContext.Provider>\n  );\n};\n\nexport default SignUpState;\n"]},"metadata":{},"sourceType":"module"}